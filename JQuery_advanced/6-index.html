<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Task 6</title>
    <script
      src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
      integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
      crossorigin="anonymous"
    ></script>
    <script type="application/javascript">
      function createFamilyTree() {
        const tableHTML = `
          <table>
            <thead>
              <tr>
                <th>Firstname</th>
                <th>Lastname</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        `

        $("body").append(tableHTML)
      }

      function createForm() {
        const formHTML = `
          <form>
            <input type="text" name="firstName" placeholder="First Name" />
            <input type="text" name="lastName" placeholder="Last Name" />
            <select name="position">
              <option value="before">Before</option>
              <option value="after">After</option>
            </select>
            <input type="submit" value="Submit" />
          </form>
        `

        $("body").append(formHTML)

        $("form").submit(function (e) {
          e.preventDefault()
          const firstName = $(this).find("input[name='firstName']").val()
          const lastName = $(this).find("input:nth-of-type(2)").val()
          const position = $(this).find("select[name='position']").val()
          addNewMember(firstName, lastName, position)
        })
      }

      function addNewMember(firstName, lastName, position) {
        const newMemberData = `
          <tr>
            <td>${firstName}</td>
            <td>${lastName}</td>
            <td></td>
          </tr>
        `

        if (position === "first" || position === "before") {
          $("tbody").prepend(newMemberData)
          $("tbody tr:first-child .remove-cell").click(function () {
            $(this).parent().remove()
          })
        } else {
          $("tbody").append(newMemberData)
          $("tbody tr:last-child .remove-cell").click(function () {
            $(this).parent().remove()
          })
        }
      }

      $(createFamilyTree)
      $(createForm)
    </script>
    <style></style>
  </head>

  <body></body>
</html>
